# Docs Map (v2)

この `docs/` 配下は、同じ内容を複数文書に重複記載しないために、以下の責務で分割する。

## 正本（契約）

- `spec_v2.md`
  - 共通契約、共通エラー、MCP全体の基本ルール
- `spec_manuals.md`
  - `manual_*` ツールのI/O契約（型、既定値、値域、返却shape、エラー条件）
- `spec_vault.md`
  - `vault_*` ツールのI/O契約（型、既定値、値域、返却shape、エラー条件）

## 設計説明（要約・意図）

- `rag_design_v2.md`
  - `manual_find` 中心の探索フロー、アルゴリズム、性能/トークン最適化方針
  - 契約の詳細値は再掲しない（必要時は `spec_manuals.md` を参照）

## 運用要件（要約・非機能）

- `requirements.md`
  - 公開スコープ、非機能要件、運用要件、観測性、Eval方針/受け入れ基準
  - ツールI/Oの厳密な契約は再掲しない（必要時は spec 系を参照）

## 更新手順（推奨）

1. 仕様変更時は先に `spec_*`（契約の正本）を更新する
2. 次に `rag_design_v2.md`（設計意図・フロー説明）を更新する
3. 最後に `requirements.md`（運用・SLO・Eval要件）を更新する

## 重複禁止の目安

- `spec_*` にあるパラメータの型/既定値/値域/エラー条件を、他文書に同じ粒度で再掲しない
- `rag_design_v2.md` / `requirements.md` では、要約・背景・設計理由・運用判断だけを書く
- 差分が出た場合は `spec_*` を優先し、他文書を追随修正する
